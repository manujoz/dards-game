# X01 Rules

## Overview

Classic countdown game where players start with a specific score (e.g., 501) and race to reach exactly zero.

## Configuration

-   **Starting Score**: 301, 501 (default), 701, 901.
-   **In Mode**:
    -   **Straight-In** (default): Can start scoring on any hit.
    -   **Double-In**: Must hit a double to start scoring.
-   **Out Mode**:
    -   **Straight-Out**: Can finish on any hit that reduces score to exactly 0.
    -   **Double-Out** (default): Must finish on a double segment that reduces score to exactly 0.
    -   **Master-Out**: Must finish on a double or triple segment that reduces score to exactly 0.

## Scoring

-   **Inputs**:
    -   Segment (1-20, 25)
    -   Multiplier (1, 2, 3)
-   **Calculation**: Total points = Segment \* Multiplier.
-   **Update**: Current Score = Previous Score - Total points.

## Win Conditions

-   The first player to reach a score of exactly **0** according to the **Out Mode** rules wins.
    -   **Double-Out**: The winning dart must be a Double (Inner Bull counts as Double 25).
    -   **Master-Out**: The winning dart must be a Double or Triple.

## Edge Cases (Bust Rules)

A "Bust" occurs if a throw results in an invalid state. The turn ends immediately, and the score reverts to the value at the start of the turn.

### bust Conditions

1. **Score < 0**: Any hit that reduces score below zero.
2. **Score == 1 (Double/Master Out)**: Reaching 1 is a bust because it's impossible to double/triple out from 1.
3. **Score == 0 (Invalid Out)**: Reaching 0 with a non-double hit in Double-Out, or non-double/triple in Master-Out.

## Precision Decisions

-   **Bull in Double-Out**: Inner Bull (Double 25, 50 points) is a valid double for finishing. Outer Bull (25 points) is not.
-   **Bust Revert**: Score reverts to the state _before the first dart of the current turn_ was thrown.

## Canonical Scenarios (Golden)

### Scenario 1: Standard Win (Double Out)

_Config: 501, Double Out_
**Start Score**: 40
**Turn**:

1.  **Throw 1**: 20 Single. (Score: 20)
2.  **Throw 2**: 10 Double. (Score: 0)
    **Result**: **WIN**. Game Over.

### Scenario 2: Bust (Score < 0)

_Config: 501, Double Out_
**Start Score**: 20
**Turn**:

1.  **Throw 1**: 20 Double. (Score: -20 -> **BUST**)
    **Result**: Turn ends. Score reverts to **20**. Player change.

### Scenario 3: Bust (Score 1 in Double Out)

_Config: 501, Double Out_
**Start Score**: 19
**Turn**:

1.  **Throw 1**: 18 Single. (Score: 1 -> **BUST**)
    **Result**: Turn ends. Score reverts to **19**. Player change.

### Scenario 4: Invalid Finish (Single on Double Out)

_Config: 501, Double Out_
**Start Score**: 16
**Turn**:

1.  **Throw 1**: 16 Single. (Score: 0 -> **BUST**)
    **Result**: Turn ends. Score reverts to **16**. Player change.

### Scenario 5: Double In

_Config: 301, Double In_
**Start Score**: 301
**Turn**:

1.  **Throw 1**: 20 Single. (Score: 301 - Invalid start)
2.  **Throw 2**: 20 Double. (Score: 301-40 = 261 - Valid start)
3.  **Throw 3**: 20 Single. (Score: 261-20 = 241)
    **Result**: Score is **241**. Player change.
